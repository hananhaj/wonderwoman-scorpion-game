<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>השוואה בין גיבור על וגיבור אמיתי</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesome for the completion icon -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        /* הגדרות גופנים ובסיס */
        @import url('https://fonts.googleapis.com/css2?family=Heebo:wght@400;700;900&display=swap');
        body {
            font-family: 'Heebo', sans-serif;
            background-color: #f0f4f8; 
            color: #1a202c;
            /* שינוי: הסרנו את חסימת הגלילה ואת מרכוז התוכן האנכי */
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 0.5rem; /* הוספת ריפוד קל סביב הדף */
        }
        
        /* מיכל ראשי גמיש ומרכזי - הוסר גובה קבוע */
        #main-container {
            width: 98%; 
            max-width: 1200px; 
            display: flex;
            flex-direction: column;
            gap: 0.5rem; /* הגדלתי את הרווחים קצת לאסתטיקה (מ-0.25rem) */
            margin: 0.5rem auto; /* הגדלתי שוליים אנכיים (מ-0.25rem) */
            /* שינוי: הוסר גובה קבוע (height: 98vh;) כדי לאפשר גלילת דף */
        }
        
        /* סגנונות גרירה ומטרה */
        .draggable {
            cursor: grab;
            transition: transform 0.2s, box-shadow 0.2s, background-color 0.2s;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1); 
            text-align: center;
        }
        .draggable:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.2);
        }
        .drop-target {
            min-height: 3rem; 
            transition: background-color 0.2s, border 0.2s;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            font-size: 0.875rem; 
        }
        .drop-zone-hover {
            background-color: #fce7f3; 
            border: 3px dashed #db2777;
        }
        .dropped-item {
            cursor: default !important;
            opacity: 1 !important;
            pointer-events: none;
            font-weight: 700; 
            color: #1f2937; 
            font-size: 0.8rem; 
        }

        /* סגנון כותרות הטבלה */
        .header-ww {
            background: linear-gradient(135deg, #0077b6 0%, #00b4d8 100%); 
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.3);
            border-bottom: 5px solid #ffba08;
            font-size: 1.125rem; 
        }
        .header-oms {
            background: linear-gradient(135deg, #f77f00 0%, #fcbf49 100%); 
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.3);
            border-bottom: 5px solid #0077b6;
            font-size: 1.125rem;
        }
        .header-topic {
            background-color: #38a169; 
            color: white;
            border-bottom: 5px solid #6ee7b7;
            font-size: 1.125rem;
        }

        /* --- 4 סגנונות צבע לכרטיסיות הגרירה (2 ל-WW, 2 ל-OMS) --- */
        /* WW - צבעים קרים */
        .color-ww-1 { background-color: #90e0ef; color: #03045e; border-bottom: 4px solid #00b4d8; } /* תכלת בהיר */
        .color-ww-2 { background-color: #48cae4; color: #023e8a; border-bottom: 4px solid #0077b6; } /* כחול ביניים */

        /* OMS - צבעים חמים */
        .color-oms-1 { background-color: #ffe8d6; color: #ff8500; border-bottom: 4px solid #ffba08; } /* כתום אפרסק בהיר */
        .color-oms-2 { background-color: #ffb703; color: #a0522d; border-bottom: 4px solid #fb8500; } /* צהוב חרדל */


        /* סגנון הרקע של הפריטים כשהם מוטלים בטבלה */
        .dropped-ww { background-color: #e0f7fa; } 
        .dropped-oms { background-color: #fff8e1; } 

        /* מיכל כרטיסיות גמיש */
        #draggable-items-container {
            flex-shrink: 0; 
            /* הסרנו את ה-overflow: auto שהיה כאן בעבר */
        }
        
        /* אנימציית קונפטי */
        @keyframes confetti-fall {
            0% { transform: translateY(-100vh) rotate(0deg); opacity: 1; }
            100% { transform: translateY(100vh) rotate(720deg); opacity: 0; }
        }

        .confetti {
            position: fixed;
            width: 10px;
            height: 10px;
            background-color: #f0f;
            border-radius: 50%;
            pointer-events: none;
            z-index: 1000;
            animation: confetti-fall 5s linear infinite;
        }
    </style>
</head>
<body class="p-1 md:p-2"> 

    <div id="main-container">
        <header class="text-center p-2 bg-white rounded-xl shadow-lg border-b-4 border-green-500">
            <h1 class="text-2xl font-extrabold text-gray-800 md:text-3xl">השוואה בין גיבור על וגיבור אמיתי 🌟</h1>
            <p class="text-base text-gray-600 mt-1">גרור את הקלפים הצבעוניים למקומם הנכון בטבלה.</p>
        </header>
    
        <div id="feedback-message" class="text-center font-bold h-6 text-sm md:text-base">
            <!-- הודעות פידבק יופיעו כאן -->
        </div>
    
        <!-- טבלת ההשוואה (מטרות הגרירה) -->
        <div class="w-full flex-grow">
            <div class="grid grid-cols-3 gap-1 bg-white rounded-xl shadow-2xl overflow-hidden">
                <!-- כותרות הטבלה - עם אייקונים ועיצוב חדש -->
                <div class="col-span-1 p-2 text-center header-topic text-white font-black">נושא ההשוואה 🔎</div>
                <div class="col-span-1 p-2 text-center header-ww text-white font-black border-l border-blue-900 flex items-center justify-center">
                    <i class="fas fa-bolt text-yellow-300 ml-2"></i> וונדר וומן 🦸‍♀️
                </div>
                <div class="col-span-1 p-2 text-center header-oms text-white font-black flex items-center justify-center">
                    הזקן והעקרב 👴🦂
                </div>
    
                <!-- שורות הטבלה - עם padding מופחת (p-1) וגודל פונט קטן יותר -->
                
                <div class="col-span-1 p-2 font-semibold bg-gray-100 border-l border-gray-300 flex items-center justify-center text-sm">כוח 💪</div>
                <div id="ww-כוח" data-target="ww" data-category="כוח" class="col-span-1 p-1 drop-target bg-blue-50 border-l border-gray-300"></div>
                <div id="oms-כוח" data-target="oms" data-category="כוח" class="col-span-1 p-1 drop-target bg-yellow-50"></div>
    
                <div class="col-span-1 p-2 font-semibold bg-gray-100 border-l border-gray-300 flex items-center justify-center text-sm">מעשה גבורה 🔥</div>
                <div id="ww-מעשה גבורה" data-target="ww" data-category="מעשה גבורה" class="col-span-1 p-1 drop-target bg-blue-50 border-l border-gray-300"></div>
                <div id="oms-מעשה גבורה" data-target="oms" data-category="מעשה גבורה" class="col-span-1 p-1 drop-target bg-yellow-50"></div>
    
                <div class="col-span-1 p-2 font-semibold bg-gray-100 border-l border-gray-300 flex items-center justify-center text-sm">מניע לפעולה 🎯</div>
                <div id="ww-מניע לפעולה" data-target="ww" data-category="מניע לפעולה" class="col-span-1 p-1 drop-target bg-blue-50 border-l border-gray-300"></div>
                <div id="oms-מניע לפעולה" data-target="oms" data-category="מניע לפעולה" class="col-span-1 p-1 drop-target bg-yellow-50"></div>
    
                <div class="col-span-1 p-2 font-semibold bg-gray-100 border-l border-gray-300 flex items-center justify-center text-sm">קושי / סכנה ⚠️</div>
                <div id="ww-קושי / סכנה" data-target="ww" data-category="קושי / סכנה" class="col-span-1 p-1 drop-target bg-blue-50 border-l border-gray-300"></div>
                <div id="oms-קושי / סכנה" data-target="oms" data-category="קושי / סכנה" class="col-span-1 p-1 drop-target bg-yellow-50"></div>
    
                <div class="col-span-1 p-2 font-semibold bg-gray-100 border-l border-gray-300 flex items-center justify-center text-sm">תכונה מרכזית 💖</div>
                <div id="ww-תכונה מרכזית" data-target="ww" data-category="תכונה מרכזית" class="col-span-1 p-1 drop-target bg-blue-50 border-l border-gray-300"></div>
                <div id="oms-תכונה מרכזית" data-target="oms" data-category="תכונה מרכזית" class="col-span-1 p-1 drop-target bg-yellow-50"></div>
    
                <div class="col-span-1 p-2 font-semibold bg-gray-100 border-l border-gray-300 flex items-center justify-center text-sm">המסר הסופי 💡</div>
                <div id="ww-המסר הסופי" data-target="ww" data-category="המסר הסופי" class="col-span-1 p-1 drop-target bg-blue-50 border-l border-gray-300"></div>
                <div id="oms-המסר הסופי" data-target="oms" data-category="המסר הסופי" class="col-span-1 p-1 drop-target bg-yellow-50"></div>
            </div>
        </div>
    
        <!-- כרטיסיות לגרירה - מעוצבים כ"קלפים" -->
        <div class="w-full bg-white p-3 rounded-xl shadow-2xl border border-gray-200" style="flex-shrink: 0;">
            <h2 class="text-lg font-black mb-2 text-teal-700 border-b pb-1 text-center">בנק המשפטים 📜</h2>
            <!-- צמצום הפונטים ושימוש ב-grid קטן יותר -->
            <div id="draggable-items-container" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 xl:grid-cols-6 gap-2">
                <!-- פריטי הגרירה יוצגו כאן ע"י JavaScript -->
            </div>
            <div id="remaining-count" class="mt-2 text-center text-gray-500 font-medium text-xs">נותרו להתאמה: 12</div>
        </div>
    </div>


    <!-- Modal for Completion Message -->
    <div id="completion-modal" class="fixed inset-0 bg-gray-800 bg-opacity-75 hidden items-center justify-center z-50">
        <div class="bg-white p-8 rounded-2xl shadow-2xl text-center max-w-sm mx-4 transform transition-all scale-100 border-b-8 border-yellow-500">
            <i class="fas fa-crown text-7xl text-yellow-500 mb-4 animate-bounce"></i>
            <h3 class="text-3xl font-extrabold text-green-600">מדהים! סיימת בהצטיינות!</h3>
            <p class="text-xl mt-4 text-gray-700">הבנת את כל נקודות ההשוואה בין שני סוגי הגבורה.</p>
            <button onclick="window.location.reload()" class="mt-6 px-6 py-3 bg-teal-500 text-white font-bold rounded-full hover:bg-teal-600 transition duration-300 shadow-md hover:shadow-lg">
                <i class="fas fa-redo-alt ml-2"></i> שחק שוב
            </button>
        </div>
    </div>

    <script>
        // הקלפים משתמשים ב-4 צבעים: color-ww-1 ו-color-ww-2 ל-WW, ו-color-oms-1 ו-color-oms-2 ל-OMS.
        const COMPARISON_DATA = [
            // Wonder Woman Items (WW - צבעים קרים - 3x1, 3x2)
            { text: "כוח־על, עפה, מגן וחבל אמת 💥", target: 'ww', category: "כוח", color: 'color-ww-1' },
            { text: "מצילה ילדה מבניין בוער 🚒", target: 'ww', category: "מעשה גבורה", color: 'color-ww-2' },
            { text: "להציל ולשמור על צדק בעולם 🌎", target: 'ww', category: "מניע לפעולה", color: 'color-ww-1' },
            { text: "אש, עשן ומצית מסוכן 🚨", target: 'ww', category: "קושי / סכנה", color: 'color-ww-2' },
            { text: "אומץ, צדק, תעוזה 🛡️", target: 'ww', category: "תכונה מרכזית", color: 'color-ww-1' },
            { text: "הכוח האמיתי הוא בלב טוב ❤️", target: 'ww', category: "המסר הסופי", color: 'color-ww-2' },
            
            // Old Man and Scorpion Items (OMS - צבעים חמים - 3x1, 3x2)
            { text: "כוח פנימי, חוזק לב ואמונה בטוב ✨", target: 'oms', category: "כוח", color: 'color-oms-1' },
            { text: "מציל עקרב אף שהוא נעקץ שוב ושוב 🦂", target: 'oms', category: "מעשה גבורה", color: 'color-oms-2' },
            { text: "לעזור כי זה בטבעו – לעשות טוב 🌱", target: 'oms', category: "מניע לפעולה", color: 'color-oms-1' },
            { text: "עקיצות וכאב פיזי 💉", target: 'oms', category: "קושי / סכנה", color: 'color-oms-2' },
            { text: "חמלה, סבלנות, טוב לב 🤲", target: 'oms', category: "תכונה מרכזית", color: 'color-oms-1' },
            { text: "הגבורה האמיתית היא בכוח הלב לבחור בטוב 👑", target: 'oms', category: "המסר הסופי", color: 'color-oms-2' }
        ];

        const totalItems = COMPARISON_DATA.length;
        let correctDropsCount = 0;

        const draggableContainer = document.getElementById('draggable-items-container');
        const feedbackMessage = document.getElementById('feedback-message');
        const completionModal = document.getElementById('completion-modal');
        const remainingCountElement = document.getElementById('remaining-count');
        let confettiInterval; 

        // פונקציית ערבוב
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }

        // 1. אתחול המשחק
        function initializeGame() {
            shuffleArray(COMPARISON_DATA);
            draggableContainer.innerHTML = '';
            correctDropsCount = 0;
            remainingCountElement.textContent = `נותרו להתאמה: ${totalItems}`;

            COMPARISON_DATA.forEach((item, index) => {
                const itemElement = document.createElement('div');
                itemElement.id = `item-${index}`;
                
                // קלאסים בסיסיים ודינמיים
                const baseClasses = ['draggable', 'p-2', 'rounded-lg', 'font-medium', 'text-xs', 'shadow-md'];
                const dynamicClasses = item.color.split(' '); 
                
                itemElement.classList.add(...baseClasses, ...dynamicClasses);

                itemElement.setAttribute('draggable', 'true');
                itemElement.setAttribute('data-correct-target', item.target);
                itemElement.setAttribute('data-category', item.category);
                itemElement.setAttribute('data-color-group', item.target === 'ww' ? 'dropped-ww' : 'dropped-oms'); 
                itemElement.textContent = item.text;

                itemElement.addEventListener('dragstart', handleDragStart);
                draggableContainer.appendChild(itemElement);
            });

            // הוספת מאזינים לכל אזורי ההטלה
            document.querySelectorAll('.drop-target').forEach(zone => {
                zone.innerHTML = ''; 
                zone.addEventListener('dragover', handleDragOver);
                zone.addEventListener('dragleave', handleDragLeave);
                zone.addEventListener('drop', handleDrop);
            });
        }

        // פונקציות Drag & Drop
        function handleDragStart(e) {
            e.dataTransfer.setData('text/plain', e.target.id);
            e.dataTransfer.setData('data-correct-target', e.target.getAttribute('data-correct-target'));
            e.dataTransfer.setData('data-category', e.target.getAttribute('data-category'));
            e.dataTransfer.setData('data-color-group', e.target.getAttribute('data-color-group'));
            
            e.target.classList.add('opacity-50');
        }

        function handleDragOver(e) {
            e.preventDefault(); 
            e.currentTarget.classList.add('drop-zone-hover');
        }

        function handleDragLeave(e) {
            e.currentTarget.classList.remove('drop-zone-hover');
        }

        function handleDrop(e) {
            e.preventDefault();
            const dropZone = e.currentTarget;
            dropZone.classList.remove('drop-zone-hover');

            if (dropZone.children.length > 0) {
                showFeedback("כאן כבר יש משפט, נסה באזור אחר.", 'bg-yellow-100', '#D97706');
                return;
            }

            const draggedId = e.dataTransfer.getData('text/plain');
            const draggedCorrectTarget = e.dataTransfer.getData('data-correct-target');
            const draggedCategory = e.dataTransfer.getData('data-category');
            const draggedColorGroup = e.dataTransfer.getData('data-color-group');


            const target = dropZone.getAttribute('data-target');
            const category = dropZone.getAttribute('data-category');

            const isTargetCorrect = draggedCorrectTarget === target;
            const isCategoryCorrect = draggedCategory === category;

            if (isTargetCorrect && isCategoryCorrect) {
                const draggedElement = document.getElementById(draggedId);

                // הסרת כל קלאסי העיצוב המקוריים של הכרטיס - רק 4 הצבעים הפעילים
                draggedElement.classList.remove(
                    'draggable', 'opacity-50', 'shadow-md',
                    'color-ww-1', 'color-ww-2', 
                    'color-oms-1', 'color-oms-2',
                    'p-2', 'text-xs', 'font-medium'
                );
                
                // הוספת קלאסים לאחר ההטלה - צבע רקע לפי הקבוצה
                draggedElement.classList.add('dropped-item', 'w-full', 'h-full', 'p-1', 'shadow-none', 'flex', 'items-center', 'justify-center', draggedColorGroup);
                
                // הסרת צבעי הרקע המקוריים של הטבלה
                dropZone.classList.remove('bg-blue-50', 'bg-yellow-50');

                // הזזת הפריט הנגרר לאזור ההטלה
                dropZone.appendChild(draggedElement);
                
                // הסרת המאזינים כדי למנוע גרירה חוזרת
                draggedElement.removeEventListener('dragstart', handleDragStart);

                showFeedback("יפה מאוד! התאמה נכונה! 👍", 'bg-green-100', '#059669');
                correctDropsCount++;
                updateRemainingCount();
                
                checkCompletion();
            } else {
                showFeedback("אופס, נסה שוב.", 'bg-red-100', '#DC2626');
                 document.getElementById(draggedId).classList.remove('opacity-50'); 
            }
        }

        // פונקציית הצגת פידבק
        function showFeedback(message, bgColor, textColor) {
            feedbackMessage.textContent = message;
            feedbackMessage.style.backgroundColor = bgColor;
            feedbackMessage.style.color = textColor;
            feedbackMessage.classList.add('p-1', 'rounded-lg', 'transition-all', 'duration-300', 'shadow-md', 'scale-105');

            setTimeout(() => {
                feedbackMessage.textContent = '';
                feedbackMessage.classList.remove('p-1', 'rounded-lg', 'transition-all', 'duration-300', 'shadow-md', 'scale-105');
                feedbackMessage.style.backgroundColor = '';
                feedbackMessage.style.color = '';
            }, 1500);
        }

        // עדכון מונה הפריטים שנותרו
        function updateRemainingCount() {
            const remaining = totalItems - correctDropsCount;
            remainingCountElement.textContent = `נותרו להתאמה: ${remaining}`;
            if (remaining === 0) {
                remainingCountElement.textContent = `כל הכרטיסים במקומם! 🎉`;
            }
        }

        // פונקציית בדיקת סיום המשחק
        function checkCompletion() {
            if (correctDropsCount === totalItems) {
                completionModal.classList.remove('hidden');
                completionModal.classList.add('flex');
                confettiEffect();
            }
        }

        // פונקציית אפקט הקונפטי
        function confettiEffect() {
            if (confettiInterval) {
                clearInterval(confettiInterval);
            }

            const colors = ['#00b4d8', '#ffba08', '#ef4444', '#38a169', '#ff8500']; 
            const container = document.body;
            let counter = 0;
            const maxBursts = 8; 

            function createConfettiBurst() {
                if (counter >= maxBursts) {
                    clearInterval(confettiInterval);
                    return;
                }
                
                for (let i = 0; i < 50; i++) {
                    const confetti = document.createElement('div');
                    confetti.classList.add('confetti');
                    confetti.style.left = `${Math.random() * 100}vw`;
                    confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                    confetti.style.animationDelay = `${-Math.random() * 5}s`;
                    confetti.style.animationDuration = `${3 + Math.random() * 2}s`;
                    confetti.style.width = `${5 + Math.random() * 8}px`; 
                    confetti.style.height = `${5 + Math.random() * 8}px`; 
                    container.appendChild(confetti);

                    setTimeout(() => {
                        confetti.remove();
                    }, 5000);
                }
                counter++;
            }

            createConfettiBurst();
            confettiInterval = setInterval(createConfettiBurst, 400); 
        }

        // הפעלת המשחק עם טעינת העמוד
        window.onload = initializeGame;
    </script>
</body>
</html>
